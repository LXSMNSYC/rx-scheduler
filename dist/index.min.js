var Scheduler=function(e){"use strict";class t{schedule(e){}delay(e,t){}}const n=(e,t)=>{try{e()}finally{t.cancel()}},s=(t,n,s)=>{const r=new e.BooleanCancellable;return"function"==typeof n?t(()=>s(r)):r.cancel(),r},r=e=>t=>s(e,t,e=>!e.cancelled&&n(t,e)),a=e=>(t,r)=>s(e,t,e=>{if(!e.cancelled)if("number"==typeof r&&r>0){const s=setTimeout(()=>!e.cancelled&&n(t,e),r);e.addEventListener("cancel",()=>clearTimeout(s))}else n(t,e)});let c;const l=e=>requestAnimationFrame(e),i=r(l),u=a(l);class o extends t{static get instance(){return void 0===c&&(c=new o),c}schedule(e){return i(e)}delay(e,t){return u(e,t)}}let d;const g=e=>Promise.resolve().then(e),h=r(g),f=a(g);class m extends t{static get instance(){return void 0===d&&(d=new m),d}schedule(e){return h(e)}delay(e,t){return f(e,t)}}let v;const p=e=>setTimeout(e,0),w=r(p),y=a(p);class L extends t{static get instance(){return void 0===v&&(v=new L),v}schedule(e){return w(e)}delay(e,t){return y(e,t)}}let b;const M=e=>e(),x=r(M),E=a(M);class R extends t{static get instance(){return void 0===b&&(b=new R),b}schedule(e){return x(e)}delay(e,t){return E(e,t)}}let U;const k=(()=>{const e=URL.createObjectURL(new Blob(['(()=>{self.addEventListener("message",a=>self.postMessage(a.data))})();'])),t=new Worker(e);let n=!1;const s=[];t.addEventListener("message",()=>{s.length>0&&(s.shift()(),s.length>0?t.postMessage(0):n=!1)});return e=>{s.push(e),n||(n=!0,t.postMessage(0))}})(),B=r(k),C=a(k);class T extends t{static get instance(){return void 0===U&&(U=new T),U}schedule(e){return B(e)}delay(e,t){return C(e,t)}}let j;const O=(()=>{const e=URL.createObjectURL(new Blob(['(()=>{self.addEventListener("message",a=>self.postMessage(a.data))})();'])),t=256,n=navigator.hardwareConcurrency||4,s=[],r=[],a=[1],c=[],l=()=>{const e=a[0],t=a[e]||0;return a[0]=0===t?e+1:t,a[e]=-1,e},i=()=>{const t=new Worker(e);return t.addEventListener("message",({data:e})=>{r[e]&&(r[e](),r[e]=null,(e=>{-1===a[e]&&(a[e]=a[0],a[0]=e)})(e)),c.length>0?t.postMessage(c.shift()):s.push(t)}),t};for(let e=0;e<n;e+=1)s[e]=i();return function(e){const a=l();r[a]=e,c.push(a),s.length>0?s.shift().postMessage(c.shift()):n<t&&i().postMessage(c.shift())}})(),W=r(O),q=a(O);class A extends t{static get instance(){return void 0===j&&(j=new A),j}schedule(e){return W(e)}delay(e,t){return q(e,t)}}return class{static get interface(){return t}static get current(){return R.instance}static get immediate(){return o.instance}static get async(){return m.instance}static get timeout(){return L.instance}static get worker(){return T.instance}static get pool(){return A.instance}}}(Cancellable);